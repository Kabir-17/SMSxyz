"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.assessmentRoutes = void 0;
const express_1 = require("express");
const auth_1 = require("../../middlewares/auth");
const validateRequest_1 = require("../../middlewares/validateRequest");
const user_interface_1 = require("../user/user.interface");
const assessment_controller_1 = require("./assessment.controller");
const assessment_validation_1 = require("./assessment.validation");
const router = (0, express_1.Router)();
router.get("/teacher/assignments", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), assessment_controller_1.AssessmentController.getTeacherAssignments);
router.get("/teacher", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), assessment_controller_1.AssessmentController.listTeacherAssessments);
router.get("/teacher/performance", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), (0, validateRequest_1.validateRequest)(assessment_validation_1.teacherPerformanceQuerySchema), assessment_controller_1.AssessmentController.getTeacherPerformanceMatrix);
router.get("/teacher/export", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), (0, validateRequest_1.validateRequest)(assessment_validation_1.exportAllTeacherAssessmentsSchema), assessment_controller_1.AssessmentController.exportTeacherAssessments);
router.post("/", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), (0, validateRequest_1.validateRequest)(assessment_validation_1.createAssessmentSchema), assessment_controller_1.AssessmentController.createAssessment);
router.get("/categories", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER, user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), assessment_controller_1.AssessmentController.listCategories);
router.post("/categories", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), (0, validateRequest_1.validateRequest)(assessment_validation_1.categoryCreateSchema), assessment_controller_1.AssessmentController.createCategory);
router.patch("/categories/:id", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), (0, validateRequest_1.validateRequest)(assessment_validation_1.categoryUpdateSchema), assessment_controller_1.AssessmentController.updateCategory);
router.get("/admin", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), assessment_controller_1.AssessmentController.listAdminAssessments);
router.get("/admin/export", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), (0, validateRequest_1.validateRequest)(assessment_validation_1.adminExportAssessmentsSchema), assessment_controller_1.AssessmentController.exportAdminAssessments);
router.get("/admin/classes", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), assessment_controller_1.AssessmentController.getAdminClasses);
router.patch("/admin/:id/preferences", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), (0, validateRequest_1.validateRequest)(assessment_validation_1.adminUpdateAssessmentPreferenceSchema), assessment_controller_1.AssessmentController.updateAdminAssessmentPreference);
router.get("/student", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.STUDENT), assessment_controller_1.AssessmentController.getStudentAssessments);
router.get("/student/:studentId", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.PARENT, user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN, user_interface_1.UserRole.TEACHER), assessment_controller_1.AssessmentController.getStudentAssessments);
router.get("/:id", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER, user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), assessment_controller_1.AssessmentController.getAssessmentDetails);
router.patch("/:id", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), (0, validateRequest_1.validateRequest)(assessment_validation_1.updateAssessmentSchema), assessment_controller_1.AssessmentController.updateAssessment);
router.delete("/:id", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), assessment_controller_1.AssessmentController.deleteAssessment);
router.post("/:id/results", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER), (0, validateRequest_1.validateRequest)(assessment_validation_1.submitResultsSchema), assessment_controller_1.AssessmentController.submitAssessmentResults);
router.get("/:id/export", auth_1.authenticate, (0, auth_1.authorize)(user_interface_1.UserRole.TEACHER, user_interface_1.UserRole.ADMIN, user_interface_1.UserRole.SUPERADMIN), (0, validateRequest_1.validateRequest)(assessment_validation_1.exportAssessmentSchema), assessment_controller_1.AssessmentController.exportAssessment);
exports.assessmentRoutes = router;
//# sourceMappingURL=assessment.route.js.map